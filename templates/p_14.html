<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <!-- <link rel="stylesheet" href="./style.css"> -->
    <title>index</title>
    <style>
        .choice{
            position: absolute;
            display: none;
            justify-content: space-between;
            align-items: center;
            border-radius: 20px;
            top: 70%;
            left: 28%;
            width: 400px;
            padding: 10px;
        }
        .choice a{
            width: 120px;
            height: 80px;
            box-shadow: 4px 8px 10px #888888;
            text-decoration: none;
            border-radius: inherit;
            text-align: center;
        }
        .choice a:hover{
            opacity: 0.3;
        }
        .virus img#a{
            position: absolute;
            width: 40px;
            top: 100px;
            left: 250px;
            opacity: 0.3;
            animation: domove 10s infinite;
            animation-delay: 0.5s;
        }
        .virus img#a-{
            position: absolute;
            width: 40px;
            top: 100px;
            left: 250px;
            opacity: 0.3;
            animation: domove- 10s infinite;
            animation-delay: 0.5s;
        }
        .virus img#b{
            position: absolute;
            width: 40px;
            top: 100px;
            left: 400px;
            opacity: 0.3;
            animation: domove 10s infinite;
            animation-delay: 1.5s;
        }
        .virus img#b_{
            position: absolute;
            width: 40px;
            top: 100px;
            left: 400px;
            opacity: 0.3;
            animation: domove_ 10s infinite;
            animation-delay: 1.5s;
        }
        .virus img#c{
            position: absolute;
            width: 40px;
            top: 180px;
            left: 550px;
            opacity: 0.3;
            animation: domove 10s infinite;
            animation-delay: 1s;
        }
        .virus img#c-{
            position: absolute;
            width: 40px;
            top: 180px;
            left: 550px;
            opacity: 0.3;
            animation: domove- 10s infinite;
            animation-delay: 1s;
        }
        .virus img#d{
            position: absolute;
            width: 40px;
            top: 230px;
            left: 350px;
            opacity: 0.3;
            animation: domove 10s infinite;
            animation-delay: 2s;
        }
        .virus img#d_{
            position: absolute;
            width: 40px;
            top: 230px;
            left: 350px;
            opacity: 0.3;
            animation: domove_ 10s infinite;
            animation-delay: 2s;
        }
        @keyframes domove{
            0%{
                transform: rotate(30deg);
            }
            25%{
                transform: translate(30px, 60px) rotate(120deg);
            }
            50%{
                transform: translate(-30px) rotate(210deg);
            }
            75%{
                transform: translate(30px, -60px) rotate(300deg);
            }
            100%{
                transform: rotate(30deg);
            }
        }
        @keyframes domove-{
            0%{
                transform: rotate(30deg);
            }
            25%{
                transform: translate(30px, 60px) rotate(120deg);
            }
            50%{
                transform: translate(-100px) rotate(210deg);
            }
            75%{
                transform: translate(30px, -60px) rotate(300deg);
            }
            100%{
                transform: rotate(30deg);
            }
        }
        @keyframes domove_{
            0%{
                transform: rotate(30deg);
            }
            25%{
                transform: translate(30px, 60px) rotate(120deg);
            }
            50%{
                transform: translate(100px) rotate(210deg);
            }
            75%{
                transform: translate(30px, -60px) rotate(300deg);
            }
            100%{
                transform: rotate(30deg);
            }
        }
        .level{
            position: absolute;
            top: 15px;
            left: 850px;
            border-color: black;
            z-index: 100;
            display: none;
        }
        .level ul{
            display: block;
        }
        .level ul li{
            list-style: none;
            margin-top: 15px;
        }
        .level ul li a{
            color: #fff;
            text-decoration: none;
            padding: 6px 25px;
            border-radius: 20px;
            font-weight: 600;
            background-color: #fff;
            color: #2b1065;
        }
        .level ul li a:hover{
            box-shadow: 2px 4px 6px #888888;
        }

    </style>
</head>
<body>
    <header>
        <a href="#" id="menu">菜单</a>
        <ul>
            <li><a href="#" id="process" class="active">关卡</a></li>
            <li><a href="#" id="achievement" class="active">成就</a></li>
        </ul>
    </header>
    <div class="level">
        <ul>
            <li><a href="http://127.0.0.1:5000">Home Page</a></li>
            <li><a href="http://127.0.0.1:5000/01">刚刚入侵人体</a></li>
            <li><a href="http://127.0.0.1:5000/03">派遣先锋队伍</a></li>
            <li><a href="http://127.0.0.1:5000/04">寻求变异之道</a></li>
            <li><a href="http://127.0.0.1:5000/13">亲自领头出征</a></li>
        </ul>
    </div>
    <div class="achievement_board">
        <span>成就列表</span>
        <div class="ending">
            <div name="ending0">1.达成结局：英年早逝</div>
            <div name="ending1">2.达成结局：无毒不丈夫</div>
            <div name="ending2">3.达成结局：小病毒想当发明家</div>
            <div name="ending3">4.达成结局：苦海无涯</div>
            <div name="ending4">5.达成结局：空城计</div>
            <div name="ending5">6.达成结局：君子报仇</div>
            <div name="ending6">7.达成结局：人事已尽天命难违</div>
            <div name="ending7">8.The End</div>
        </div>
    </div>
    <div class="frame">
        <div class="board">
            <div class="antenna"><img src="{{ url_for('static', filename='broadcast-tower-solid.svg') }}" alt=""></div>
            <div class="video">
                <video id="video" controls="controls">
                    <source src="{{ url_for('static', filename='./video/14 A 寻找没带口罩的人.mp4') }}" type="video/mp4" />
                </video>
            </div>
            <div class="button play"><img src="{{ url_for('static', filename='play-circle-solid.svg') }}" alt=""></div>
            <div class="button pause"><img src="{{ url_for('static', filename='pause-circle-solid.svg') }}" alt=""></div>
            <div class="button stop"><img src="{{ url_for('static', filename='stop-circle-solid.svg') }}" alt=""></div>
            <div class="button lines"><img src="{{ url_for('static', filename='grip-lines-solid.svg') }}" alt=""></div>        
        </div>
        <div class="knowledge">
            <a href="#" id="science">科普</a>
            <div class="content">
                <span></span>
                <div class="article">
                    1、疫苗作用机制</br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;想要知道疫苗怎么发挥作用，首先应了解人体的免疫系统。当我们的身体遇到病原体攻击时，身体需要一段时间才能弄清楚如何来战斗和对付它。首先，巨噬细胞是第一个遇到病原体的细胞，它会吞噬病毒，并将抗原，即病毒蛋白（相当于病毒身份证）传递给B细胞和T细胞。随后，B细胞在接到抗原后先分化成记忆B细胞和浆细胞，浆细胞则产生并分泌抗体。抗体可以与病毒表面的刺突蛋白结合，阻止刺突蛋白与人体细胞表面的血管紧张素转换酶2（ACE2）受体结合，从而使病毒失去吸附人体细胞的能力。而T细胞在接收到抗原后则分化成记忆T细胞和效应T细胞，效应T细胞可以直接与被病毒感染的细胞结合，或分泌淋巴因子使其裂解以消灭病毒。
                    </br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通俗来讲，B细胞参与的抗体免疫就像是捕手，能将病毒控制起来，使病毒失去感染细胞的能力，而T细胞参与的细胞免疫就像警察，主要作用是发现犯罪现场，清除被感染的细胞，以更长久地维持免疫力。但B细胞和T细胞接受抗原再分化的过程相对缓慢，记忆B和记忆T细胞的分化速度却很快，所以记忆细胞的作用则是在下一波病毒入侵时能快速识别出病毒，并进一步分化消灭病毒。
                    </br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;就像士兵需要为攻击准备而训练一样，当免疫系统遇到曾交手过的病原体时，才最为熟练，攻击力最强。而疫苗的功能就像是训练演习，让我们的身体在遇到病原体之前就建立起防御机制。通过疫苗预先注射进抗原，激起免疫反应，提前产生抗体和记忆细胞，以便在真正的病毒入侵时人体能快速免疫应答。所以，疫苗只能增强免疫力，起预防作用，而不能百分百阻挡病毒，不能消灭病毒，也没有治疗作用。当真正的病毒入侵时，机体被感染的程度还是取决于自身免疫力的强弱。
                    </br>
                </div>
            </div>
        </div>
    </div>
    <div class="choice">
        <a href="http://127.0.0.1:5000/13" class="left">被痛打一顿回去</a>
    </div>
    <div class="virus">
        <img src="{{ url_for('static', filename='virus-solid.svg') }}" id="a">
        <img src="{{ url_for('static', filename='virus-solid.svg') }}" id="a-">
        <img src="{{ url_for('static', filename='virus-solid.svg') }}" id="b">
        <img src="{{ url_for('static', filename='virus-solid.svg') }}" id="b_">
        <img src="{{ url_for('static', filename='virus-solid.svg') }}" id="c">
        <img src="{{ url_for('static', filename='virus-solid.svg') }}" id="c-">
        <img src="{{ url_for('static', filename='virus-solid.svg') }}" id="d">
        <img src="{{ url_for('static', filename='virus-solid.svg') }}" id="d_">
    </div>
</body>
</html>
<script>
    video.onended = function() {
        document.getElementsByClassName("choice")[0].style.display = "flex";
    }
    var science_cnt = 0;
    science.onclick = function() {
        science_cnt %= 2;
        if (science_cnt == 0) {
            document.getElementsByClassName("content")[0].style.display = "flex";
        }
        else {
            document.getElementsByClassName("content")[0].style.display = "none";
        }
        ++science_cnt;
    }
    var process_cnt = 0;
    process.onclick = function() {
        process_cnt %= 2;
        if (process_cnt == 0) {
            document.getElementsByClassName("level")[0].style.display = "inline";
        }
        else {
            document.getElementsByClassName("level")[0].style.display = "none";
        }
        ++process_cnt;
    }
    var achievement_cnt = 0;
    achievement.onclick = function() {
        achievement_cnt %= 2;
        if (achievement_cnt == 0) {
            document.getElementsByClassName("achievement_board")[0].style.display = "inline";
        }
        else {
            document.getElementsByClassName("achievement_board")[0].style.display = "none";
        }
        ++achievement_cnt;
    }
    var index;
    var recv;
    var str;
    window.onload = function() {
        xhr = new XMLHttpRequest();
        xhr.responseType = 'json';
        xhr.open('GET', '/achievement_judge');
        xhr.send();
        xhr.onreadystatechange = function() {
            if (xhr.readyState === 4) {
                if (xhr.status >= 200 && xhr.status < 300) {
                    recv = xhr.response;
                    if (recv.ending0 == 1)
                    document.getElementsByName('ending0')[0].style.textDecoration = "line-through";
                    if (recv.ending1 == 1)
                    document.getElementsByName('ending1')[0].style.textDecoration = "line-through";
                    if (recv.ending2 == 1)
                    document.getElementsByName('ending2')[0].style.textDecoration = "line-through";
                    if (recv.ending3 == 1)
                    document.getElementsByName('ending3')[0].style.textDecoration = "line-through";
                    if (recv.ending4 == 1)
                    document.getElementsByName('ending4')[0].style.textDecoration = "line-through";
                    if (recv.ending5 == 1)
                    document.getElementsByName('ending5')[0].style.textDecoration = "line-through";
                    if (recv.ending6 == 1)
                    document.getElementsByName('ending6')[0].style.textDecoration = "line-through";
                    if (recv.ending7 == 1)
                    document.getElementsByName('ending7')[0].style.textDecoration = "line-through";
                }
            }
        }
    }
</script>